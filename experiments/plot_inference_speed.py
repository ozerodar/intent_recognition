import numpy as np
import matplotlib.pyplot as plt
from pathlib import Path

num_vars = 100
n = 3000
colors = ["blueviolet", "lightcoral", "royalblue", "darkred"]

dataset_size = np.array([num_vars * 150 for num_vars in range(1, 101)])
mini_lm_us = np.array(
    [
        1000 * (el / n)
        for el in [
            0.24029383659362794,
            0.36553287506103516,
            0.4929526329040527,
            0.5649435520172119,
            0.645482349395752,
            0.7432878971099853,
            0.8849534511566162,
            0.9807011127471924,
            1.078259563446045,
            1.3091811656951904,
            1.4244919300079346,
            1.6010010719299317,
            1.7359006881713868,
            1.79248046875,
            1.9505605697631836,
            2.0692116260528564,
            2.1832988262176514,
            2.2843239307403564,
            2.4486154079437257,
            2.5714861392974853,
            2.690252685546875,
            2.824371004104614,
            2.9531797885894777,
            3.063693046569824,
            3.1861111640930178,
            3.3218504905700685,
            3.457364559173584,
            3.5872238159179686,
            3.7198269844055174,
            3.847560691833496,
            3.9825620651245117,
            4.10863184928894,
            4.252939653396607,
            4.448502063751221,
            4.498045921325684,
            4.596334838867188,
            3.978329801559448,
            4.6429284572601315,
            4.7756658554077145,
            4.880933666229248,
            4.999012517929077,
            5.160502958297729,
            5.306298637390137,
            5.43098554611206,
            4.898203945159912,
            5.674475145339966,
            5.812284183502197,
            5.946381425857544,
            6.076591539382934,
            6.253584623336792,
            6.366842603683471,
            6.5688543796539305,
            5.850563097000122,
            6.7890407085418705,
            6.936434030532837,
            7.119644832611084,
            7.157738399505615,
            7.292697191238403,
            7.4427636623382565,
            7.575926733016968,
            6.798628091812134,
            7.832003498077393,
            7.969440364837647,
            8.104820156097412,
            8.258441066741943,
            8.361879873275758,
            8.496935415267945,
            8.64153528213501,
            7.719142866134644,
            8.883941316604615,
            9.042659425735474,
            9.17902855873108,
            9.346171569824218,
            9.471915864944458,
            9.607379674911499,
            9.710162591934203,
            9.828707790374756,
            9.989433288574219,
            10.135989141464233,
            10.254711675643922,
            10.411957406997681,
            10.527764177322387,
            10.680182361602784,
            10.81119122505188,
            10.945079374313355,
            11.024803400039673,
            11.192144918441773,
            11.311300277709961,
            11.451461791992188,
            11.584821271896363,
            11.71012053489685,
            11.841394424438477,
            11.986308050155639,
            12.156080961227417,
            12.280309200286865,
            12.423917436599732,
            12.56051459312439,
            12.705803823471069,
            12.8148521900177,
            12.947615098953246,
        ]
    ]
)
mini_lm_s = np.array(
    [
        1000 * (el / n)
        for el in [
            0.11547722816467285,
            0.11886096000671387,
            0.1191716194152832,
            0.11772475242614747,
            0.1183969497680664,
            0.12171211242675781,
            0.12564501762390137,
            0.12592873573303223,
            0.12687277793884277,
            0.12933220863342285,
            0.13264527320861816,
            0.13672986030578613,
            0.13989591598510742,
            0.14039511680603028,
            0.14846677780151368,
            0.15096263885498046,
            0.15633211135864258,
            0.1627129077911377,
            0.17026047706604003,
            0.1760934829711914,
            0.18274259567260742,
            0.18894591331481933,
            0.19262595176696778,
            0.19853615760803223,
            0.20591144561767577,
            0.21190714836120605,
            0.2156068801879883,
            0.22089219093322754,
            0.2247230052947998,
            0.23010997772216796,
            0.2339944839477539,
            0.23837823867797853,
            0.2427642822265625,
            0.25533337593078614,
            0.2476097583770752,
            0.25040364265441895,
            0.24135289192199708,
            0.2358266830444336,
            0.2398287296295166,
            0.24143142700195314,
            0.2474079132080078,
            0.2526823043823242,
            0.25795726776123046,
            0.26255335807800295,
            0.2721561908721924,
            0.2647100448608398,
            0.2702059268951416,
            0.2725834369659424,
            0.27665271759033205,
            0.2791619300842285,
            0.2866029739379883,
            0.29024338722229004,
            0.29407687187194825,
            0.2901942729949951,
            0.29550671577453613,
            0.3024172782897949,
            0.2942506790161133,
            0.2979912281036377,
            0.2985568046569824,
            0.3024288177490234,
            0.3085984230041504,
            0.3045176029205322,
            0.3051450729370117,
            0.3059239387512207,
            0.3068866729736328,
            0.3072253704071045,
            0.30800771713256836,
            0.30838789939880373,
            0.31584939956665037,
            0.3123453140258789,
            0.31368579864501955,
            0.31641545295715334,
            0.31572580337524414,
            0.3143306732177734,
            0.31756200790405276,
            0.31698055267333985,
            0.3173382759094238,
            0.3183875560760498,
            0.3196252346038818,
            0.32182722091674804,
            0.3224079132080078,
            0.3206014156341553,
            0.3240525245666504,
            0.32306551933288574,
            0.32422585487365724,
            0.323412561416626,
            0.32593646049499514,
            0.32674260139465333,
            0.32559542655944823,
            0.3265376567840576,
            0.3263737201690674,
            0.32677497863769533,
            0.3281844615936279,
            0.32849645614624023,
            0.33071060180664064,
            0.33256330490112307,
            0.3305230617523193,
            0.33089361190795896,
            0.33037457466125486,
            0.330712890625,
        ]
    ]
)
roberta_us = np.array(
    [
        1000 * (el / n)
        for el in [
            0.37349638938903806,
            0.5856991767883301,
            0.9009603500366211,
            1.123558521270752,
            1.3545307636260986,
            1.6425350189208985,
            1.8725244522094726,
            2.11423773765564,
            2.348364067077637,
            2.6108689308166504,
            2.8797531604766844,
            3.123686695098877,
            3.415159797668457,
            3.068254899978638,
            3.8058955669403076,
            4.109606122970581,
            4.424870538711548,
            4.636772346496582,
            4.986627292633057,
            5.353618526458741,
            5.661942768096924,
            5.077293348312378,
            6.25486159324646,
            6.398667573928833,
            6.728097867965698,
            7.0477605819702145,
            7.18093638420105,
            7.842423057556152,
            8.217891454696655,
            8.456472444534302,
            8.572297811508179,
            8.911981678009033,
            9.130129098892212,
            9.694695854187012,
            9.798503351211547,
            10.264344549179077,
            10.577436542510986,
            10.842874097824097,
            11.05084490776062,
            11.350119876861573,
            11.536236476898193,
            11.835752868652344,
            12.11986255645752,
            12.411426544189453,
            12.769474077224732,
            13.051579570770263,
            13.440147972106933,
            13.510064744949341,
            13.914870595932006,
            14.069554042816161,
            14.598234176635742,
            14.729455947875977,
            14.80999526977539,
            15.051336860656738,
            15.440138721466065,
            15.615849733352661,
            15.82194356918335,
            16.5243182182312,
            16.629341745376585,
            16.78069896697998,
            17.31113910675049,
            17.316599130630493,
            17.382306480407713,
            17.887338495254518,
            18.461882209777833,
            18.84603657722473,
            18.540175199508667,
            19.2418532371521,
            19.547900676727295,
            19.64335904121399,
            19.607599115371706,
            20.484336948394777,
            20.295951271057127,
            20.774782943725587,
            21.028896045684814,
            21.14579048156738,
            21.38914875984192,
            21.685943841934204,
            22.11500597000122,
            22.376087427139282,
            22.595904207229616,
            22.346227073669432,
            23.472561264038085,
            23.817504405975342,
            23.866222667694093,
            23.795019102096557,
            24.408169555664063,
            24.508871936798094,
            24.588339376449586,
            25.009101390838623,
            25.512080097198485,
            25.326154375076293,
            25.546370887756346,
            26.653407621383668,
            26.765946626663208,
            26.805773401260375,
            27.457782077789307,
            27.652826070785522,
            27.744876766204833,
            27.571167182922363,
        ]
    ]
)
roberta_s = np.array(
    [
        1000 * (el / n)
        for el in [
            0.13347654342651366,
            0.13779683113098146,
            0.1393867015838623,
            0.14720492362976073,
            0.16493806838989258,
            0.18436217308044434,
            0.20349593162536622,
            0.21915125846862793,
            0.23238162994384765,
            0.24908437728881835,
            0.2677823543548584,
            0.2803459644317627,
            0.2960794925689697,
            0.2930013656616211,
            0.3030512809753418,
            0.3123055934906006,
            0.32184176445007323,
            0.3355379581451416,
            0.34494853019714355,
            0.35314135551452636,
            0.35898709297180176,
            0.36894731521606444,
            0.3687013626098633,
            0.3732231616973877,
            0.37878098487854006,
            0.3811908721923828,
            0.382924747467041,
            0.3828514575958252,
            0.3855273246765137,
            0.3864135265350342,
            0.3899413585662842,
            0.39310345649719236,
            0.39854822158813474,
            0.3966828346252441,
            0.40079364776611326,
            0.40173797607421874,
            0.40176591873168943,
            0.4026226043701172,
            0.4049356460571289,
            0.4067357063293457,
            0.40650372505187987,
            0.40877251625061034,
            0.40828418731689453,
            0.4087937355041504,
            0.40942797660827634,
            0.41021575927734377,
            0.4086358070373535,
            0.4110377311706543,
            0.4094801902770996,
            0.4109163284301758,
            0.408795690536499,
            0.41266436576843263,
            0.4147950649261475,
            0.41057462692260743,
            0.41088643074035647,
            0.41658525466918944,
            0.4172218322753906,
            0.40577945709228513,
            0.4153463840484619,
            0.4110738277435303,
            0.40510783195495603,
            0.4079121112823486,
            0.4145650386810303,
            0.41211509704589844,
            0.4060166358947754,
            0.4028946876525879,
            0.41168551445007323,
            0.4055290222167969,
            0.40591864585876464,
            0.407245397567749,
            0.40927996635437014,
            0.4023869037628174,
            0.4077810287475586,
            0.4064635276794434,
            0.40714373588562014,
            0.4103344440460205,
            0.4079276084899902,
            0.40996570587158204,
            0.40860929489135744,
            0.4080596923828125,
            0.40641169548034667,
            0.4090714931488037,
            0.408524227142334,
            0.405180549621582,
            0.405669116973877,
            0.4087055683135986,
            0.40474963188171387,
            0.4073981285095215,
            0.40726680755615235,
            0.4056767463684082,
            0.4074881553649902,
            0.41146025657653806,
            0.4109086036682129,
            0.42088847160339354,
            0.41819372177124026,
            0.40749564170837405,
            0.4096240520477295,
            0.40694513320922854,
            0.4081277370452881,
            0.4079271793365479,
        ]
    ]
)
plt.plot(
    dataset_size,
    mini_lm_us,
    label=f"model: all-MiniLM-L6-v2, unsupervised",
    color=colors[0],
    linewidth=2,
)
plt.plot(
    dataset_size,
    mini_lm_s,
    label=f"model: all-MiniLM-L6-v2, supervised",
    color=colors[1],
    linewidth=2,
)
plt.plot(
    dataset_size,
    roberta_us,
    label=f"model: all-roberta-large-v1, unsupervised",
    color=colors[2],
    linewidth=2,
)
plt.plot(
    dataset_size,
    roberta_s,
    label=f"model: all-roberta-large-v1, supervised",
    color=colors[3],
    linewidth=2,
)

ticks = [i for i in dataset_size.tolist() if i % 1500 == 0 or i == 150]
plt.xlim((0, 15000))
plt.xticks(ticks, labels=ticks)
plt.xlabel("number of sentences in the dataset [-]")
plt.ylabel("duration [ms]")
plt.legend(loc="upper left")
plt.grid()

path = Path(__file__).parent / "plots"
if not path.exists():
    path.mkdir(parents=True)

plt.savefig(str(path / "inf_time.eps"), format="eps")
plt.show()
